loki:
  image:
    tag: 2.2.1
  enabled: true

promtail:
  enabled: true

fluent-bit:
  enabled: true

grafana:
  enabled: true
  admin:
    existingSecret: "loki-stack-grafana"

  ingress:
    enabled: true
    annotations:
      cert-manager.io/cluster-issuer: vault-issuer
      kubernetes.io/ingress.class: nginx
    hosts:
      - grafana.dc
    tls:
     - secretName: grafana-tls
       hosts:
         - grafana.dc

  sidecar:
    datasources:
      enabled: true
    dashboards:
      enabled: true
      label: grafana_dashboard

  image:
    tag: 7.5.4

  persistence:
    enabled: true

  plugins:
    - grafana-piechart-panel

  dashboards:
    default:
      traefik:
        gnetId: 11462
        revision: 1

prometheus:
  enabled: false
  image:
    tag: v2.26.0

  extraScrapeConfigs: |
    - job_name: 'openwrt'
      scrape_interval: 10s
      static_configs:
        - targets: ['192.168.1.1:9100']
    - job_name: 'borg'
      scrape_interval: 10s
      static_configs:
        - targets: ['192.168.1.111:9942']

  podSecurityPolicy:
    enabled: true

  server:
    extraArgs:
      #storage.local.retention: 720h

  nodeexporter:
    image:
      repository: quay.io/prometheus/node-exporter
      tag: v1.1.2
    
    extraHostPathMounts:
     - name: textfile-dir
       mountPath: /srv/txt_collector
       hostPath: /var/lib/node-exporter
       readOnly: true
       mountPropagation: HostToContainer
   
    securityContext:
      fsGroup: 65534
      runAsGroup: 65534
      runAsNonRoot: false
      runAsUser: 0
